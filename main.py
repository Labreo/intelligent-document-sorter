# main.py
import typer
from rich.console import Console
from core.agent import DocumentSorterAgent

app = typer.Typer()
console = Console()

@app.command()
def start():
    """
    Starts the Document Sorter Agent to run continuously in the background.
    """
    console.print("================ Document Sorter Agent ================\n" \
    """

....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
..................................................#@@@@%=...........................................
.................................................%@@@@@@@@@%=.......................................
.................................................@@@@@@@@@@@@@@%=...................................
.................................................@@@@@@@@@@@@@@@@@@%=...............................
.......................................-#%%*=....@@@@@@@@@@@@@@@@@@@@@@#............................
......................................@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@...........................
.....................................+@@@@@@@@@@@@+.:-#@@@@@@@@@@@@@@@@@@...........................
.....................................+@@@@@@@@@@@@+..........:=@@@@@@@@@@...........................
.....................................+@@@@@@@@@@@@+...................:#@...........................
.............................=%%#*+--*@@@@@@@@@@@@+....................+@...........................
...........................+@@@@@@@@@@@#%%%@@@@@@@@@@%%%#*+==::.......:@#...........................
...........................@@@@@@@@@@@@..........@+.........-+###%%@@@%:............................
...........................@@@@@@@@@@@@..........@+.................................................
...........................@@@@@@@@@@@@..........@+.................................................
...........................@@@@@@@@@@@@..........@+.................................................
...........................@@@@@@@@@@@@..........@+.................................................
...........................@@@@@@@@@@@@..........@+.................................................
...........................@@@@@@@@@@@@..........@+..........-++##%%%%#:............................
...........................*@@@@@@@@@@@+*#%%%@@@@@@@@@@@%##*+=-:::....-@*...........................
.............................*@@%#*++#@@@@@@@@@@@@+....................*@...........................
.....................................+@@@@@@@@@@@@+....................*@...........................
.....................................+@@@@@@@@@@@@+...........:*@@@@@@@@@...........................
.....................................+@@@@@@@@@@@@+..:=@@@@@@@@@@@@@@@@@@...........................
.....................................:@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@...........................
.......................................+@@@#+....@@@@@@@@@@@@@@@@@@@@@@%............................
.................................................@@@@@@@@@@@@@@@@@@@+...............................
.................................................@@@@@@@@@@@@@@@+...................................
.................................................%@@@@@@@@@@+.......................................
..................................................%@@@@@+...........................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................
....................................................................................................

""")
    
    try:
        agent = DocumentSorterAgent()
        agent.start_listening()
    except Exception as e:
        console.print(f"[bold red]A critical error occurred: {e}[/bold red]")

if __name__ == "__main__":
    app()